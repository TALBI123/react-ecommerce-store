<canvas id="canvas"></canvas>
<button id="fetchImage">Fetch & Process Image</button>
<button id="download">Download Image</button>

<script>
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  document.getElementById("fetchImage").addEventListener("click", () => {
    const imgUrl = "https://fakestoreapi.com/img/71YXzeOuslL._AC_UY879_.jpg";
    const img = new Image();
    img.crossOrigin = "anonymous";
    img.src = imgUrl;
    img.onload = function () {
      canvas.width = img.width;
      canvas.height = img.height;
      ctx.drawImage(img, 0, 0);
      // Process Image
      let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      let data = imageData.data;

      for (let i = 0; i < data.length; i += 4) {
        let r = data[i],
          g = data[i + 1],
          b = data[i + 2];
        // Remove light background (Adjust threshold for better results)
        if (r > 200 && g > 200 && b > 200) {
          data[i + 3] = 0; // Make pixel transparent
        }
      }

      ctx.putImageData(imageData, 0, 0);
    };
  });

  // Download Processed Image
  document.getElementById("download").addEventListener("click", () => {
    const imageURL = canvas.toDataURL("image/png");
    const link = document.createElement("a");
    link.href = imageURL;
    link.download = "processed-image.png";
    link.click();
  });
</script>
